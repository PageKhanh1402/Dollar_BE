@model DollarProject.ViewModels.ProfileViewModel

<section class="section-py">
    <div class="container pt-30p">

        

        <!-- Form -->
        <div class="grid grid-cols-12 gap-30p mt-10">
            <div class="xxl:col-start-3 xxl:col-end-11 col-span-12">
                <div class="bg-b-neutral-3 rounded-12 p-40p">
                    <h4 class="heading-4 text-w-neutral-1 mb-60p">Edit Profile</h4>

                    <form asp-action="Edit" asp-controller="Profile" method="post" enctype="multipart/form-data">
                        <input type="hidden" asp-for="UserID" />
                        <!-- Cover Photo -->
                        <div class="relative rounded-32 overflow-hidden">
                            <div class="glitch-effect">
                                <div class="glitch-thumb">
                                    <img class="w-full xl:h-[472px] object-cover"
                                         src="~/images/@(Model.ImageURL ?? "default.png")"
                                         alt="cover image">
                                </div>
                                <div class="glitch-thumb">
                                    <img class="w-full xl:h-[472px] object-cover"
                                         src="~/images/@(Model.ImageURL ?? "default.png")"
                                         alt="cover image">
                                </div>
                            </div>
                            
                            <input asp-for="CoverPhoto" type="file" id="coverPhoto" class="hidden" />
                        </div>

                        <!-- Profile Avatar -->
                        <div class="relative flex justify-center -mt-20">
                            <div class="z-[4] relative">
                                <img class="avatar xl:size-60 border-2 border-secondary rounded-full"
                                     src="~/images/@(Model.ImageURL ?? "default.png")"
                                     alt="profile">
                                <label for="profilePhoto" class="cursor-pointer absolute -bottom-6 left-1/2 -translate-x-1/2">
                                    <span class="flex-c size-60p rounded-full bg-primary text-b-neutral-4 icon-32">
                                        <i class="ti ti-camera"></i>
                                    </span>
                                </label>
                                <input asp-for="ProfilePhoto" type="file" id="profilePhoto" class="hidden" />
                            </div>
                        </div>

                        <div class="grid grid-cols-8 gap-30p">
                            <div class="sm:col-span-4 col-span-8">
                                <label class="label label-lg mb-3">First Name</label>
                                <input asp-for="FirstName" class="box-input-3" />
                            </div>
                            <div class="sm:col-span-4 col-span-8">
                                <label class="label label-lg mb-3">Last Name</label>
                                <input asp-for="LastName" class="box-input-3" />
                            </div>
                            <div class="col-span-8">
                                <label class="label label-lg mb-3">Email</label>
                                <input asp-for="Email" class="box-input-3" />
                            </div>
                            <div class="col-span-8">
                                <label class="label label-lg mb-3">Username</label>
                                <input asp-for="Username" class="box-input-3" />
                            </div>
                            <div class="col-span-8">
                                <label class="label label-lg mb-3">Phone Number</label>
                                <input asp-for="PhoneNumber" class="box-input-3" />
                            </div>
                            <div class="col-span-8">
                                <label class="label label-lg mb-3">Address</label>
                                <input asp-for="Address" class="box-input-3" />
                            </div>
                            <div class="col-span-8">
                                <label class="label label-lg mb-3">Seller Description</label>
                                <textarea asp-for="SellerDescription" class="box-input-3 h-[142px]"></textarea>
                            </div>
                        </div>

                        <div class="flex items-center md:justify-end justify-center mt-8">
                            <button class="btn btn-primary" onclick="this.disabled=true; this.innerText='Saving...'; this.form.submit();">
                                Save Changes
                            </button>
                        </div>
                    </form>

                </div>
            </div>
        </div>

    </div>
</section>

<script>
    document.getElementById("profilePhoto").addEventListener("change", function (e) {
        const [file] = e.target.files;
        if (file) {
            const img = document.querySelector("img.avatar");
            img.src = URL.createObjectURL(file);
        }
    });

    document.getElementById("coverPhoto").addEventListener("change", function (e) {
        const [file] = e.target.files;
        if (file) {
            const covers = document.querySelectorAll(".glitch-thumb img");
            covers.forEach(img => img.src = URL.createObjectURL(file));
        }
    });
</script>
